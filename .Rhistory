View(sum)
sum %>% plot_ly() %>% add_trace(x = ~n, y = ~MNRCOLL, type = 'bar')
sum %>% plot_ly() %>% add_trace(x = ~MNRCOLL, y = ~n, type = 'bar')
sum %>% plot_ly() %>% add_trace(x = ~MNRCOLL, y = ~n, type = 'bar')
library(plotly)
sum %>% plot_ly() %>% add_trace(x = ~MNRCOLL, y = ~n, type = 'bar')
save <-
all_crashes %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
save %>% ggplotly()
save %>% ggplotly()
all_crashes %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
all_crashes %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
all_crashes %>% fct_infreq(MNRCOLL) %>% fct_rev() %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
all_crashes %>% fct_infreq(MNRCOLL) %>% fct_rev() %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
# all_crashes <- all_crashes %>%
#   filter(MNRCOLL != "Unknown", CNTYCODE == input$cntynum)  #CNTYCODE is what changes chart
#
all_crashes$MNRCOLL <- fct_infreq(all_crashes$MNRCOLL) %>% fct_rev()
save <-
all_crashes %>%
ggplot(mapping = aes(x = MNRCOLL, y = ..count..)) +
theme_classic() +
theme(axis.line=element_blank(),
legend.position = "none",
axis.ticks=element_blank(),
axis.text.x = element_text(size = 12)
) +
geom_bar() +
scale_y_continuous(expand = expansion(mult = c(0, .05)), name = "") +
coord_flip()
save
save
runApp()
install.packages("d3")
install.packages("d3heatmap")
library(d3heatmap)
d3heatmap(all_crashes)
d3heatmap(all_crashes, scale = "column")
d3heatmap(all_crashes$CRSHDATE, scale = "column")
devtools::install_github("rstudio/d3heatmap")
update.packages()
install.packages(c("tinytex", "units"))
install.packages(c("sf", "survival"))
install.packages("DT")
?d3
??d3
library(d3heatmap)
??d3
?d3heatmap
day_time <- all_crashes %>%
select(CRSHMTH, CRSHTIME) %>%
group_by(CRSHMTH, CRSHTIME) %>%
filter(CNTYCODE == "13")
day_time <- all_crashes %>%
filter(CNTYCODE == "13") %>%
select(CRSHMTH, CRSHTIME) %>%
group_by(CRSHMTH, CRSHTIME)
d3heatmap(day_time)
View(day_time)
newtime <- recode(all_crashes$CRSHTIME,
"12am" <- c(1200:1259)
)
newtime <- recode(all_crashes$CRSHTIME,
"12am" <- range(1200,1259)
)
newtime <- recode(all_crashes$CRSHTIME,
"12am" = 1 <- range(1200,1259)
)
newtime <- recode(all_crashes$CRSHTIME,
range(1200,1259) = "12am"
)
newtime <- recode(all_crashes$CRSHTIME,
range(1200,1259) = "12am"
)
newtime <- recode(all_crashes$CRSHTIME,
range(1200,1259) = "12am"
)
newtime <- recode(all_crashes$CRSHTIME,
range(1200,1259) = "12am")
newtime <- recode(all_crashes$CRSHTIME,
1259 = "12am")
newtime <- recode(all_crashes$CRSHTIME,
"1259" = "12am")
newtime <- recode(all_crashes$CRSHTIME,
c(1200,1259) = "12am")
newtime <- recode(all_crashes$CRSHTIME,
1200:1259 = "12am")
recode(all_crashes$CRSHTIME,
1200:1259 = "12am")
recode(all_crashes$CRSHTIME,
"1200:1259 = "12am"")
recode(all_crashes$CRSHTIME,
0000:0059 = "12am")
list <- all_crashes$CRSHTIME
recode(list,
0000:0059 = "12am")
"0000:0059 = '12am"')
recode(list,
0000:0059 = '12am')
library(dplyr)
recode(list,
0000:0059 = '12am')
dplyr::recode(list,
0000:0059 = '12am')
dplyr::recode(list,
0000:0059 = '12am',
0100:0100 = '1am')
dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
list <- all_crashes$CRSHTIME
dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am')
dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
dplyr::recode(list,
0000:0059 = '12am')
newlist <- dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
list <- all_crashes$CRSHTIME
newlist <- dplyr::recode(list,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
newlist <- dplyr::recode(list,
0000:0059 = '12am')
newlist <- dplyr::recode(list,
0000:0059 = '12am')
newlist <- dplyr::recode(list,
c(0000:0059) = '12am')
list <- all_crashes$CRSHTIME
list
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:0059 = '12am',
0100:0159 = '1am',
0200:0259 = '2am',
0300:0359 = '3am',
0400:0459 = '4am',
0500:0559 = '5am',
0600:0659 = '6am',
0700:0759 = '7am',
0800:0859 = '8am',
0900:0959 = '9am',
1000:1059 = '10am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:0059 = '12am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
" 0000:0059 = '12am'")
newlist <- dplyr::recode(all_crashes$CRSHTIME,
" 0000:2259 = '12am'")
newlist <- dplyr::recode(all_crashes$CRSHTIME,
" 0000:2259 = '12am'")
newlist <- dplyr::recode(all_crashes$CRSHTIME,
"0000:2259 = '12am'")
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:2259 = '12am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:2259 = '12am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
0000:2259 = '12am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
c(0000:2259) = '12am')
newlist <- dplyr::recode(all_crashes$CRSHTIME,
range(0000,2259) = '12am')
newlist <- dplyr::mutate(Nbr  =  forcats::fct_recode(all_crashes$CRSHTIME,
newlist <- dplyr::mutate(Nbr  =  forcats::fct_recode(all_crashes$CRSHTIME,
0000:2259 = '12am'))
newlist <- (Nbr  =  forcats::fct_recode(all_crashes$CRSHTIME,
0000:2259 = '12am'))
newlist <-forcats::fct_recode(all_crashes$CRSHTIME,
0000:2259 = '12am')
newlist <-forcats::fct_recode(all_crashes$CRSHTIME,
0000:2259 = '12am')
newlist2 <- fct_recode (all_crashes$CRSHTIME,
"12am" = 0000:2259)
list <- all_crashes$CRSHTIME
newlist2 <- fct_recode (list,
"12am" = 0000:2259)
newlist2 <- fct_recode (list,
"12am" = 0000:2259)
newlist2 <- fct_recode (all_crashes$CRSHTIME,
"12am" = 0000:2259)
newlist2 <- fct_recode (all_crashes,
"12am" = 0000:2259)
newlist2 <- fct_recode (all_crashes$CRSHTIME,
"12am" = 0000:2259)
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!
0000:2259 = '12am')
newlist2 <- fct_recode(all_crashes$CRSHTIME,
"12am" = 0000:2259)
newlist <- dplyr::recode(all_crashes$CRSHTIME,
2259 = 2259)
newlist <- dplyr::recode(all_crashes$CRSHTIME,
2259 = 2259)
newlist2 <- fct_recode(all_crashes$CRSHTIME,
"12am" = 0000:2259)
newlist <- dplyr::recode(all_crashes$CRSHTIME,
2259 = 2259)
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100:0159 = "1am",  0100:0159 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100:0159 = "1am",  0200:2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100:0159 = "1am",  0200:2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100:0159 = "1am",  0200:2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100 = "1am",  0200 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
'0100' = "1am",  '0200' = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
'0100' = "1am",  '0200' = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
0100:0159 = "1am",  range(0200,2259) = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
range(0100,0159) = "1am",  range(0200,2259) = "12pm"))
list <- all_crashes$CRSHTIME
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
range(0100,0159) = "1am",  range(0200,2259) = "12pm"))
typeof((all_crashes$CRSHTIME)
typeof(all_crashes$CRSHTIME)
View(all_crashes$CRSHTIME)
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
range(100,0159) = "1am",  range(200,2259) = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
(100:0159) = "1am",  (200:2259) = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
100:0159 = "1am",  200:2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 = "1am",  2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  2259 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  2259 == "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  269:2259 == "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  169:2359 == "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  169:2359 == "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 == "1am",  169:2359 == "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 = "1am",  169:2359 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 = "1am",  2359 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
159 = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  "1:2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  range(2205) = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  range(1,2205) = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"159" = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
case_when()
"1853" = "1am",  "2205:2206" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205:2206" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2205:2206" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- all_crashes %>%
dplyr::recode(CRSHTIME, !!!c(
"1853" = "1am",  "2206" = "12pm"))
newlist <- all_crashes %>%
recode(CRSHTIME, !!!c(
"1853" = "1am",  "2206" = "12pm"))
newlist <- all_crashes %>%
recode(CRSHTIME, !!!c(
"1853" = "1am",  "2206" = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(
"1853" = "1am",  "2206" = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(
"1853" = "1am",  2205 = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(
1853 = "1am",  2205 = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(
1853 = "1am",  2205 = "12pm"))
newlist <- all_crashes %>%
recode(.$CRSHTIME, !!!c(1853 = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am";  "2205" = "12pm"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853:1900 = '1am'",  "2205:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853:1900 = '1am'",  "2204:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853:1900 = '1am'";  "2204:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853:1900 = '1am'",  "2204:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME,  "2204:2400 = '12pm'"))
newlist <- dplyr::recode(all_crashes$CRSHTIME,  "2204:2400 = '12pm'")
newlist <- dplyr::recode(all_crashes$CRSHTIME,  2204:2400 = '12pm')
newlist <- dplyr::recode(all_crashes$CRSHTIME,  c(2204:2400) = '12pm')
newlist <- dplyr::recode(all_crashes$CRSHTIME,  range(2204:2400) = '12pm')
newlist <- dplyr::recode(all_crashes$CRSHTIME,  range(2204:2400) == '12pm')
newlist <- dplyr::recode(all_crashes$CRSHTIME,  c(2204:2400) == '12pm')
newlist <- dplyr::recode(all_crashes$CRSHTIME, !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(as.integer()all_crashes$CRSHTIME), !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
"1853" = "1am",  "2205" = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 == "1am",  2205 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 == "1am",  2205 == "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 = "1am",  2205 = "12pm"))
# library(grDevices)  # for fonts
# setwd("W:/HSSA/Keep/Jaclyn Ziebert/R_WD_Data/Shiny_Crashes")
# all_crashes <- read.csv("data/2020_crash.csv")    # pull either 2019 or 2020
all_crashes <- read_csv("data/2019_crash.csv", n_max = 2000)
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 = "1am",  2205 = "12pm"))
all_crashes$CRSHTIME > 2200
newlist2 <- fct_recode(all_crashes$CRSHTIME,
"12am" = 0000:2259)
all_crashes$CRSHTIME = as.integer(all_crashes$CRSHTIME)
typeof(all_crashes$CRSHTIME)
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853 = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853:1900 = "1am",  2205 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853:1900 = "1am",  2205:2400 = "12pm"))
all_crashes$CRSHTIME = as.integer(all_crashes$CRSHTIME)
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), !!!c(
1853:1900 = "1am",  2205:2400 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME), c(
1853:1900 = "1am",  2205:2400 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME),
1853:1900 = "1am",  2205:2400 = "12pm"))
newlist <- dplyr::recode(as.integer(all_crashes$CRSHTIME),
1853:1900 = "1am",  2205:2400 = "12pm")
newlist <- dplyr::recode(all_crashes$CRSHTIME, 1853:1900 = "1am",  2205:2400 = "12pm")
newlist <- dplyr::recode_factor(all_crashes$CRSHTIME, 1853:1900 = "1am",  2205:2400 = "12pm")
newlist <- dplyr::recode(all_crashes$CRSHTIME, 1853:1900 = "1am",  2205:2400 = "12pm")
newlist <- dplyr::recode(all_crashes$CRSHTIME, 1853 = "1am",  2205 = "12pm")
all_crashes$CRSHTIME = as.integer(all_crashes$CRSHTIME)
newlist <- dplyr::recode(all_crashes$CRSHTIME, 1853 = "1am",  2205 = "12pm")
newlist <- dplyr::recode(all_crashes$CRSHTIME, "1853" = "1am",  "2205" = "12pm")
